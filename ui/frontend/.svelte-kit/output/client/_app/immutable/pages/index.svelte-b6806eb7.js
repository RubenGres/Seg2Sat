import{S as ne,i as ie,s as ce,e as P,k as R,c as z,a as C,m as B,d as I,b as s,K as Be,g as Z,J as c,t as V,h as F,L as q,E as Q,M as Le,N as Me,O as J,P as K,Q as be,R as ye,j as Oe,f as Ye,T as oe,U as ze,V as ct,W as je,w as pe,x as he,y as fe,q as ve,o as me,B as ge,v as ut}from"../chunks/index-d10348a7.js";import{w as se,b as ot}from"../chunks/paths-1ef0be19.js";const Te=[{color:[219,14,154],label:"building"},{color:[147,142,123],label:"pervious surface"},{color:[248,12,0],label:"impervious surface"},{color:[169,113,1],label:"bare soil"},{color:[21,83,174],label:"water"},{color:[25,74,38],label:"coniferous"},{color:[70,228,131],label:"deciduous"},{color:[243,166,13],label:"brushwood"},{color:[102,0,130],label:"vineyard"},{color:[85,255,0],label:"herbaceous vegetation"},{color:[255,243,13],label:"agricultural land"},{color:[228,223,124],label:"plowed land"},{color:[61,230,235],label:"swimming pool"},{color:[255,255,255],label:"snow"},{color:[138,179,160],label:"clear cut"},{color:[107,113,79],label:"mixed"}],dt="https://zqz606ggn85ysase.us-east-1.aws.endpoints.huggingface.cloud",Ne=["/samples/default.jpg","/samples/example0.png","/samples/example1.png","/samples/example2.png","/samples/example3.png","/samples/example4.png","/samples/example5.png","/samples/example6.jpg"],Ee=[["High resolution satellite image, 4K, ultra detailed","Realistic"],["Colorful lego bricks","Lego brick"],["Black and white paper pencil drawing","Pencil"],["Oil on canvas painting","Painting"]];function st(){return BigInt(0xb7dd73e137d20800&((1<<63)-1)*Math.random())}const xe=se(new Map),Ue=se(),De=se(),Se=se(),ke=se(),Pe=se({prompt:"Aerial view of rue des Lilas, Toulouse, Haute-Garonne, France",modifier:Ee[0][0],seed:st(),steps:20}),we=se(!1),Ce=se(!1);function $e(l,e,t){const r=l.slice();return r[4]=e[t],r[6]=t,r}function Je(l){let e,t,r,n,a,d,u,h,E,y,_,M;return{c(){e=P("div"),t=P("input"),d=R(),u=P("label"),h=P("img"),M=R(),this.h()},l(w){e=z(w,"DIV",{class:!0});var g=C(e);t=z(g,"INPUT",{type:!0,name:!0,id:!0,class:!0}),d=B(g),u=z(g,"LABEL",{for:!0,class:!0});var k=C(u);h=z(k,"IMG",{src:!0,alt:!0,class:!0}),k.forEach(I),M=B(g),g.forEach(I),this.h()},h(){s(t,"type","radio"),s(t,"name","samples"),s(t,"id",r="sample-"+l[6]),t.value=n=l[6],t.disabled=a=l[0]===!0,s(t,"class","svelte-8h270x"),Be(h.src,E=ot+l[4])||s(h,"src",E),s(h,"alt",y=l[4]),s(h,"class","svelte-8h270x"),s(u,"for",_="sample-"+l[6]),s(u,"class","svelte-8h270x"),s(e,"class","snap-always snap-start")},m(w,g){Z(w,e,g),c(e,t),c(e,d),c(e,u),c(u,h),c(e,M)},p(w,g){g&1&&a!==(a=w[0]===!0)&&(t.disabled=a)},d(w){w&&I(e)}}}function pt(l){let e,t,r,n,a,d,u,h,E,y,_,M,w,g,k,p,v=Ne,i=[];for(let o=0;o<v.length;o+=1)i[o]=Je($e(l,v,o));return{c(){e=P("div"),t=P("h4"),r=V("Select a Template"),n=R(),a=P("div"),d=P("label"),u=P("span"),h=V("Upload Your Own Image"),E=R(),y=P("input"),M=R(),w=P("form"),g=P("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=z(o,"DIV",{});var f=C(e);t=z(f,"H4",{class:!0});var m=C(t);r=F(m,"Select a Template"),m.forEach(I),n=B(f),a=z(f,"DIV",{class:!0});var b=C(a);d=z(b,"LABEL",{for:!0,class:!0});var T=C(d);u=z(T,"SPAN",{class:!0});var x=C(u);h=F(x,"Upload Your Own Image"),x.forEach(I),E=B(T),y=z(T,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),T.forEach(I),b.forEach(I),M=B(f),w=z(f,"FORM",{class:!0});var S=C(w);g=z(S,"DIV",{class:!0});var O=C(g);for(let j=0;j<i.length;j+=1)i[j].l(O);O.forEach(I),S.forEach(I),f.forEach(I),this.h()},h(){s(t,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(u,"class","upload-text svelte-8h270x"),s(y,"id","image-upload"),s(y,"type","file"),s(y,"accept","image/*"),y.disabled=_=l[0]===!0,s(y,"class","file-input svelte-8h270x"),s(d,"for","image-upload"),s(d,"class","upload-label svelte-8h270x"),s(a,"class","mb-4"),s(g,"class","samples svelte-8h270x"),s(w,"class","svelte-8h270x")},m(o,f){Z(o,e,f),c(e,t),c(t,r),c(e,n),c(e,a),c(a,d),c(d,u),c(u,h),c(d,E),c(d,y),c(e,M),c(e,w),c(w,g);for(let m=0;m<i.length;m+=1)i[m].m(g,null);k||(p=[q(y,"change",l[2]),q(w,"input",l[1])],k=!0)},p(o,[f]){if(f&1&&_!==(_=o[0]===!0)&&(y.disabled=_),f&1){v=Ne;let m;for(m=0;m<v.length;m+=1){const b=$e(o,v,m);i[m]?i[m].p(b,f):(i[m]=Je(b),i[m].c(),i[m].m(g,null))}for(;m<i.length;m+=1)i[m].d(1);i.length=v.length}},i:Q,o:Q,d(o){o&&I(e),Le(i,o),k=!1,Me(p)}}}async function Xe(l){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{URL.revokeObjectURL(r.src),e(r)},r.onerror=n=>{t(n)},r.src=URL.createObjectURL(l)})}function ht(l,e,t){let r,n;return J(l,Se,u=>t(3,r=u)),J(l,we,u=>t(0,n=u)),[n,async u=>{u.preventDefault();const h=Ne[parseInt(u.target.value)];if(h){const E=await fetch(ot+h).then(_=>_.blob()),y=await Xe(E);K(Se,r=y,r)}},async u=>{var y;const E=(y=u.target.files)==null?void 0:y[0];if(E&&E.type.startsWith("image/")){const _=await Xe(E);K(Se,r=_,r),document.querySelectorAll('input[name="samples"]').forEach(w=>{w.checked=!1})}}]}class ft extends ne{constructor(e){super(),ie(this,e,ht,pt,ce,{})}}function Ke(l,e,t){const r=l.slice();return r[2]=e[t],r[7]=t,r}function We(l){let e,t,r,n,a,d,u,h,E,y,_,M,w=l[2].label+"",g,k,p;return{c(){e=P("div"),t=P("input"),d=R(),u=P("label"),h=be("svg"),E=be("rect"),_=R(),M=P("span"),g=V(w),p=R(),this.h()},l(v){e=z(v,"DIV",{class:!0});var i=C(e);t=z(i,"INPUT",{name:!0,type:!0,id:!0,class:!0}),d=B(i),u=z(i,"LABEL",{for:!0,class:!0});var o=C(u);h=ye(o,"svg",{width:!0,height:!0,viewBox:!0,class:!0});var f=C(h);E=ye(f,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),C(E).forEach(I),f.forEach(I),_=B(o),M=z(o,"SPAN",{class:!0});var m=C(M);g=F(m,w),m.forEach(I),o.forEach(I),p=B(i),i.forEach(I),this.h()},h(){s(t,"name","color"),t.checked=r=l[7]==nt,s(t,"type","radio"),s(t,"id",n="color-"+l[7]),t.value=a=l[7],s(t,"class","svelte-1oy4poo"),s(E,"x","0"),s(E,"y","0"),s(E,"width","20"),s(E,"height","20"),s(E,"fill",y="rgb("+l[2].color.join(",")+")"),s(h,"width","20"),s(h,"height","20"),s(h,"viewBox","0 0 20 20"),s(h,"class","svelte-1oy4poo"),s(M,"class","svelte-1oy4poo"),s(u,"for",k="color-"+l[7]),s(u,"class","svelte-1oy4poo"),s(e,"class","snap-always snap-start")},m(v,i){Z(v,e,i),c(e,t),c(e,d),c(e,u),c(u,h),c(h,E),c(u,_),c(u,M),c(M,g),c(e,p)},p:Q,d(v){v&&I(e)}}}function vt(l){let e,t,r,n,a,d,u,h,E,y,_,M,w,g=l[0].size+"",k,p,v,i=Te,o=[];for(let f=0;f<i.length;f+=1)o[f]=We(Ke(l,i,f));return{c(){e=P("form"),t=P("h4"),r=V("Brush Type"),n=R(),a=P("div");for(let f=0;f<o.length;f+=1)o[f].c();d=R(),u=P("h4"),h=V("Brush Size"),E=R(),y=P("div"),_=P("input"),M=R(),w=P("label"),k=V(g),this.h()},l(f){e=z(f,"FORM",{});var m=C(e);t=z(m,"H4",{class:!0});var b=C(t);r=F(b,"Brush Type"),b.forEach(I),n=B(m),a=z(m,"DIV",{class:!0,name:!0});var T=C(a);for(let j=0;j<o.length;j+=1)o[j].l(T);T.forEach(I),d=B(m),u=z(m,"H4",{class:!0});var x=C(u);h=F(x,"Brush Size"),x.forEach(I),E=B(m),y=z(m,"DIV",{class:!0});var S=C(y);_=z(S,"INPUT",{min:!0,max:!0,step:!0,name:!0,type:!0}),M=B(S),w=z(S,"LABEL",{class:!0,for:!0});var O=C(w);k=F(O,g),O.forEach(I),S.forEach(I),m.forEach(I),this.h()},h(){s(t,"class","font-bold mt-6 mb-2 leading-6 my-3"),s(a,"class","colors svelte-1oy4poo"),s(a,"name","colors"),s(u,"class","font-bold mt-6 mb-2 my-6 leading-6"),_.value="10",s(_,"min","1"),s(_,"max","150"),s(_,"step","1"),s(_,"name","brush"),s(_,"type","range"),s(w,"class","pl-2 svelte-1oy4poo"),s(w,"for","brush"),s(y,"class","brush svelte-1oy4poo")},m(f,m){Z(f,e,m),c(e,t),c(t,r),c(e,n),c(e,a);for(let b=0;b<o.length;b+=1)o[b].m(a,null);c(e,d),c(e,u),c(u,h),c(e,E),c(e,y),c(y,_),c(y,M),c(y,w),c(w,k),p||(v=q(e,"input",l[1]),p=!0)},p(f,[m]){if(m&0){i=Te;let b;for(b=0;b<i.length;b+=1){const T=Ke(f,i,b);o[b]?o[b].p(T,m):(o[b]=We(T),o[b].c(),o[b].m(a,null))}for(;b<o.length;b+=1)o[b].d(1);o.length=i.length}m&1&&g!==(g=f[0].size+"")&&Oe(k,g)},i:Q,o:Q,d(f){f&&I(e),Le(o,f),p=!1,v()}}}const nt=6;function mt(l,e,t){let r;J(l,ke,E=>t(0,r=E));const{color:n,label:a}=Te[nt];let d=`rgb(${n.join(",")})`,u=40;return K(ke,r={color:d,size:u,label:a},r),[r,async E=>{const y=E.target;if(y.name==="color"){const _=parseInt(y.value),{color:M,label:w}=Te[_];d=`rgb(${M.join(",")})`,K(ke,r={color:d,size:u,label:w},r)}else y.name==="brush"&&(u=parseInt(y.value),K(ke,r={color:d,size:u,label:a},r))},n]}class gt extends ne{constructor(e){super(),ie(this,e,mt,vt,ce,{})}}function Ze(l,e,t){const r=l.slice();return r[15]=e[t],r}function Qe(l){let e,t=l[15][1]+"",r,n,a;return{c(){e=P("option"),r=V(t),a=V("`"),this.h()},l(d){e=z(d,"OPTION",{});var u=C(e);r=F(u,t),u.forEach(I),a=F(d,"`"),this.h()},h(){e.__value=n=l[15][0],e.value=e.__value},m(d,u){Z(d,e,u),c(e,r),Z(d,a,u)},p:Q,d(d){d&&I(e),d&&I(a)}}}function bt(l){let e,t,r,n,a,d,u,h,E,y,_,M,w,g,k,p,v,i,o,f,m,b,T,x,S,O,j,Y,W,X,re,$,G,le,ue,U,D,ee,_e,te=Ee,H=[];for(let N=0;N<te.length;N+=1)H[N]=Qe(Ze(l,te,N));return{c(){e=P("form"),t=P("h4"),r=V("Prompt"),n=R(),a=P("input"),u=R(),h=P("h4"),E=V("Modifier"),y=R(),_=P("input"),w=R(),g=P("select"),k=P("option"),p=V("preset");for(let N=0;N<H.length;N+=1)H[N].c();i=R(),o=P("h4"),f=V("Random Seed"),m=R(),b=P("input"),x=R(),S=P("button"),O=V("Random"),Y=R(),W=P("h4"),X=V("Sample Steps"),re=R(),$=P("div"),G=P("input"),ue=R(),U=P("label"),D=V(l[2]),this.h()},l(N){e=z(N,"FORM",{});var A=C(e);t=z(A,"H4",{class:!0});var L=C(t);r=F(L,"Prompt"),L.forEach(I),n=B(A),a=z(A,"INPUT",{name:!0,placeholder:!0,style:!0,class:!0}),u=B(A),h=z(A,"H4",{class:!0});var ae=C(h);E=F(ae,"Modifier"),ae.forEach(I),y=B(A),_=z(A,"INPUT",{name:!0,placeholder:!0,style:!0,class:!0}),w=B(A),g=z(A,"SELECT",{name:!0,class:!0});var de=C(g);k=z(de,"OPTION",{});var Ve=C(k);p=F(Ve,"preset"),Ve.forEach(I);for(let Ae=0;Ae<H.length;Ae+=1)H[Ae].l(de);de.forEach(I),i=B(A),o=z(A,"H4",{class:!0});var Fe=C(o);f=F(Fe,"Random Seed"),Fe.forEach(I),m=B(A),b=z(A,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),x=B(A),S=z(A,"BUTTON",{class:!0});var Ge=C(S);O=F(Ge,"Random"),Ge.forEach(I),Y=B(A),W=z(A,"H4",{class:!0});var qe=C(W);X=F(qe,"Sample Steps"),qe.forEach(I),re=B(A),$=z(A,"DIV",{class:!0});var Ie=C($);G=z(Ie,"INPUT",{type:!0,name:!0,min:!0,max:!0,step:!0,class:!0}),ue=B(Ie),U=z(Ie,"LABEL",{class:!0,for:!0});var He=C(U);D=F(He,l[2]),He.forEach(I),Ie.forEach(I),A.forEach(I),this.h()},h(){s(t,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(a,"name","prompt"),s(a,"placeholder","Aerial view of ..., France."),a.disabled=d=l[6]===!0,Ye(a,"width","500px"),s(a,"class","svelte-7to72y"),s(h,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(_,"name","modifier"),s(_,"placeholder","High resolution satellite image"),_.disabled=M=l[6]===!0,Ye(_,"width","500px"),s(_,"class","svelte-7to72y"),k.disabled=!0,k.selected=!0,k.__value="preset",k.value=k.__value,s(g,"name","presets"),g.disabled=v=l[6]===!0,s(g,"class","svelte-7to72y"),s(o,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(b,"type","Number"),s(b,"name","seed"),s(b,"placeholder","Integer Seed"),b.disabled=T=l[6]===!0,s(b,"class","svelte-7to72y"),S.disabled=j=l[6]===!0,s(S,"class","svelte-7to72y"),s(W,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(G,"type","range"),s(G,"name","steps"),s(G,"min","10"),s(G,"max","30"),s(G,"step","1"),G.disabled=le=l[6]===!0,s(G,"class","svelte-7to72y"),s(U,"class","pl-2 svelte-7to72y"),s(U,"for","steps"),s($,"class","flex")},m(N,A){Z(N,e,A),c(e,t),c(t,r),c(e,n),c(e,a),oe(a,l[3]),c(e,u),c(e,h),c(h,E),c(e,y),c(e,_),oe(_,l[4]),c(e,w),c(e,g),c(g,k),c(k,p);for(let L=0;L<H.length;L+=1)H[L].m(g,null);c(e,i),c(e,o),c(o,f),c(e,m),c(e,b),oe(b,l[1]),c(e,x),c(e,S),c(S,O),c(e,Y),c(e,W),c(W,X),c(e,re),c(e,$),c($,G),oe(G,l[2]),c($,ue),c($,U),c(U,D),l[14](e),ee||(_e=[q(a,"input",l[8]),q(_,"input",l[9]),q(g,"change",l[10]),q(b,"input",l[11]),q(S,"click",ze(l[12])),q(G,"change",l[13]),q(G,"input",l[13]),q(e,"input",l[7])],ee=!0)},p(N,[A]){if(A&64&&d!==(d=N[6]===!0)&&(a.disabled=d),A&8&&a.value!==N[3]&&oe(a,N[3]),A&64&&M!==(M=N[6]===!0)&&(_.disabled=M),A&16&&_.value!==N[4]&&oe(_,N[4]),A&0){te=Ee;let L;for(L=0;L<te.length;L+=1){const ae=Ze(N,te,L);H[L]?H[L].p(ae,A):(H[L]=Qe(ae),H[L].c(),H[L].m(g,null))}for(;L<H.length;L+=1)H[L].d(1);H.length=te.length}A&64&&v!==(v=N[6]===!0)&&(g.disabled=v),A&64&&T!==(T=N[6]===!0)&&(b.disabled=T),A&2&&oe(b,N[1]),A&64&&j!==(j=N[6]===!0)&&(S.disabled=j),A&64&&le!==(le=N[6]===!0)&&(G.disabled=le),A&4&&oe(G,N[2]),A&4&&Oe(D,N[2])},i:Q,o:Q,d(N){N&&I(e),Le(H,N),l[14](null),ee=!1,Me(_e)}}}function yt(l,e,t){let r,n;J(l,Pe,i=>t(5,r=i)),J(l,we,i=>t(6,n=i));function a(){const i=d.elements;K(Pe,r={prompt:i.prompt.value,modifier:i.modifier.value,seed:BigInt(i.seed.value),steps:parseInt(i.steps.value)},r)}let d,u=r.seed,h=r.steps,E=r.prompt,y=r.modifier;function _(){E=this.value,t(3,E)}function M(){y=this.value,t(4,y)}const w=i=>{const o=i.currentTarget.selectedIndex-1;t(4,y=Ee[o][0]),K(Pe,r.modifier=Ee[o][0],r)};function g(){u=this.value,t(1,u)}const k=()=>{t(1,u=st()),a()};function p(){h=ct(this.value),t(2,h)}function v(i){je[i?"unshift":"push"](()=>{d=i,t(0,d)})}return[d,u,h,E,y,r,n,a,_,M,w,g,k,p,v]}class wt extends ne{constructor(e){super(),ie(this,e,yt,bt,ce,{})}}let _t=(l=21)=>crypto.getRandomValues(new Uint8Array(l)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var xt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kt(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var it={exports:{}};(function(l,e){(function(t,r){l.exports=r()})(typeof self!="undefined"?self:xt,function(){return function(t){var r={};function n(a){if(r[a])return r[a].exports;var d=r[a]={i:a,l:!1,exports:{}};return t[a].call(d.exports,d,d.exports,n),d.l=!0,d.exports}return n.m=t,n.c=r,n.d=function(a,d,u){n.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:u})},n.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,d){if(1&d&&(a=n(a)),8&d||4&d&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),2&d&&typeof a!="string")for(var h in a)n.d(u,h,function(E){return a[E]}.bind(null,h));return u},n.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(d,"a",d),d},n.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},n.p="",n(n.s=0)}([function(t,r,n){function a(w,g){return function(k){if(Array.isArray(k))return k}(w)||function(k,p){if(Symbol.iterator in Object(k)||Object.prototype.toString.call(k)==="[object Arguments]"){var v=[],i=!0,o=!1,f=void 0;try{for(var m,b=k[Symbol.iterator]();!(i=(m=b.next()).done)&&(v.push(m.value),!p||v.length!==p);i=!0);}catch(T){o=!0,f=T}finally{try{i||b.return==null||b.return()}finally{if(o)throw f}}return v}}(w,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(w){return function(g){if(Array.isArray(g)){for(var k=0,p=new Array(g.length);k<g.length;k++)p[k]=g[k];return p}}(w)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(w,g){for(var k=0;k<g.length;k++){var p=g[k];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(w,p.key,p)}}n.r(r);var h=/^#?[0-9A-Fa-f]{1,2}[0-9A-Fa-f]{1,2}[0-9A-Fa-f]{1,2}$/,E=/^rgb\((\s+)?[0-9]{1,3},(\s+)?[0-9]{1,3},(\s+)?[0-9]{1,3}(\s+)?\)$/,y=function(){function w(){(function(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")})(this,w),this.canvases={}}var g,k;return g=w,(k=[{key:"parseColor",value:function(p){var v=h.test(p),i=E.test(p);if(!v&&!i)throw new Error("Color is not correct format. #123123 or rgb(123, 123, 123) format required.");if(v){var o=p[0]==="#"?p.slice(1):p;return o=o.length===3?o.split("").reduce(function(x,S){return[].concat(d(x),[S,S])},[]).join(""):o,{r:parseInt(o.slice(0,2),16),g:parseInt(o.slice(2,4),16),b:parseInt(o.slice(4,6),16)}}if(i){var f=a(p.replace(/rgb|\s+|\(|\)/g,"").split(",").map(function(x){return parseInt(x)}),3),m=f[0],b=f[1],T=f[2];return{r:m=m>255?255:m,g:b=b>255?255:b,b:T=T>255?255:T}}}},{key:"make",value:function(p){var v=p.size,i=p.color;try{v*=window.devicePixelRatio;var o=this.parseColor(i),f=JSON.stringify(o);if(this.canvases[f]=this.canvases[f]||{},this.canvases[f][v]!=null)return this.canvases[f][v];var m=document.createElement("canvas");v+=v%2,m.width=v,m.height=v;for(var b=m.getContext("2d"),T=b.createImageData(v,v),x=0;x<T.data.length;x+=4)T.data[x]=255,T.data[x+1]=255,T.data[x+2]=255,T.data[x+3]=0;return this.plotCircle(2*v,4*v*(v/2),v/2,T,v,o),this.fillCircle(T,o),b.putImageData(T,0,0),this.canvases[f][v]=m,m}catch(S){console.error(S)}}},{key:"plotCircle",value:function(p,v,i,o,f,m){var b=-i,T=0,x=2-2*i;do{var S=p-4*(b+1)+(v+4*f*(T-1));o.data[S+0]=m.r,o.data[S+1]=m.g,o.data[S+2]=m.b,o.data[S+3]=255;var O=p-T*(4*f)+(v-4*(b+1));o.data[O+0]=m.r,o.data[O+1]=m.g,o.data[O+2]=m.b,o.data[O+3]=255;var j=p+4*b+(v-T*(4*f));o.data[j+0]=m.r,o.data[j+1]=m.g,o.data[j+2]=m.b,o.data[j+3]=255;var Y=p+4*f*(T-1)+(v+4*b);o.data[Y+0]=m.r,o.data[Y+1]=m.g,o.data[Y+2]=m.b,o.data[Y+3]=255,(i=x)<=T&&(x+=2*++T+1),(i>b||x>T)&&(x+=2*++b+1)}while(b<0)}},{key:"fillCircle",value:function(p,v){for(var i=4*p.width,o=1;o<p.height-1;o+=1)for(var f=!1,m=!1,b=!1,T=0;T<i;T+=4){var x=i*o+T,S=p.data[x+3],O=S===255;O&&!f?f=!0:S===0&&f?m=!0:O&&f&&m&&(b=!0),f&&m&&!b&&(p.data[x]=v.r,p.data[x+1]=v.g,p.data[x+2]=v.b,p.data[x+3]=255)}}}])&&u(g.prototype,k),w}();function _(w,g){for(var k=0;k<g.length;k++){var p=g[k];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(w,p.key,p)}}var M=function(){function w(p){(function(v,i){if(!(v instanceof i))throw new TypeError("Cannot call a class as a function")})(this,w),this.canvas=p,this.context=p.getContext("2d"),this.stampMaker=new y,this.configPixelRatio()}var g,k;return g=w,(k=[{key:"configPixelRatio",value:function(){var p=this.canvas,v=p.width,i=p.height;this.canvas.width=v*this.dpr,this.canvas.height=i*this.dpr,this.canvas.style.width="".concat(v,"px"),this.canvas.style.height="".concat(i,"px"),this.context.scale(this.dpr,this.dpr),this.context.imageSmoothingEnabled=!1}},{key:"exportAsPNG",value:function(p){var v=this;return new Promise(function(i){var o=document.createElement("canvas"),f=o.getContext("2d"),m=v.canvas,b=m.width,T=m.height,x=b/v.dpr,S=T/v.dpr;o.width=x,o.height=S,f.imageSmoothingEnabled=!1,f.drawImage(v.canvas,0,0,b,T,0,0,x,S),o.toBlob(function(O){O.lastModifedDate=new Date,O.name=p,i(O)})})}},{key:"distanceBetween",value:function(p,v){return Math.sqrt(Math.pow(v.x-p.x,2)+Math.pow(v.y-p.y,2))}},{key:"angleBetween",value:function(p,v){return Math.atan2(v.x-p.x,v.y-p.y)}},{key:"draw",value:function(p){var v=p.from,i=p.to,o=p.size,f=p.color;this.context.globalCompositeOperation="source-over",this.brush({from:v,to:i,size:o,color:f})}},{key:"erase",value:function(p){var v=p.from,i=p.to,o=p.size;this.context.globalCompositeOperation="destination-out",this.brush({from:v,to:i,size:o,color:"#000000"})}},{key:"brush",value:function(p){var v=this,i=p.from,o=p.to,f=p.size,m=p.color,b=(f-f%2)/2,T=this.stampMaker.make({size:f,color:m});if(i.x!==o.x||i.y!==o.y)for(var x=this.distanceBetween(i,o),S=this.angleBetween(i,o),O=function(X){var re=i.x+Math.sin(S)*X-b,$=i.y+Math.cos(S)*X-b;window.requestAnimationFrame(function(){v.context.drawImage(T,Math.round(re),Math.round($),f,f)})},j=0;j<x;j+=1)O(j);else{var Y=i.x-b,W=i.y-b;this.context.drawImage(T,Math.round(Y),Math.round(W),f,f)}}},{key:"dpr",get:function(){return window.devicePixelRatio||1}}])&&_(g.prototype,k),w}();r.default=M}])})})(it);var et=kt(it.exports);function Et(l){let e,t;return{c(){e=be("svg"),t=be("path"),this.h()},l(r){e=ye(r,"svg",{xmlns:!0,width:!0,viewBox:!0,class:!0});var n=C(e);t=ye(n,"path",{fill:!0,stroke:!0,"stroke-width":!0,d:!0}),C(t).forEach(I),n.forEach(I),this.h()},h(){s(t,"fill","white"),s(t,"stroke","black"),s(t,"stroke-width","30"),s(t,"d","M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.84 0-95.17-15.58-134.2-44.86c-14.12-10.59-16.97-30.66-6.375-44.81c10.59-14.12 30.62-16.94 44.81-6.375c27.84 20.91 61 31.94 95.88 31.94C344.3 415.8 416 344.1 416 256s-71.69-159.8-159.8-159.8c-37.46 0-73.09 13.49-101.3 36.64l45.12 45.14c17.01 17.02 4.955 46.1-19.1 46.1H35.17C24.58 224.1 16 215.5 16 204.9V59.04c0-24.04 29.07-36.08 46.07-19.07l47.6 47.63C149.9 52.71 201.5 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","20"),s(e,"viewBox","0 0 512 512"),s(e,"class",l[0])},m(r,n){Z(r,e,n),c(e,t)},p(r,[n]){n&1&&s(e,"class",r[0])},i:Q,o:Q,d(r){r&&I(e)}}}function It(l,e,t){let{classNames:r=""}=e;return l.$$set=n=>{"classNames"in n&&t(0,r=n.classNames)},[r]}class St extends ne{constructor(e){super(),ie(this,e,It,Et,ce,{classNames:0})}}function Pt(l){var v;let e,t,r,n,a,d,u,h=((v=l[0])==null?void 0:v.label)+"",E,y,_,M,w,g,k,p;return M=new St({}),{c(){e=P("div"),t=P("div"),r=P("canvas"),n=R(),a=P("canvas"),d=R(),u=P("span"),E=V(h),y=R(),_=P("button"),pe(M.$$.fragment),this.h()},l(i){e=z(i,"DIV",{});var o=C(e);t=z(o,"DIV",{class:!0});var f=C(t);r=z(f,"CANVAS",{class:!0,width:!0,height:!0}),C(r).forEach(I),n=B(f),a=z(f,"CANVAS",{class:!0,width:!0,height:!0}),C(a).forEach(I),d=B(f),u=z(f,"SPAN",{class:!0});var m=C(u);E=F(m,h),m.forEach(I),y=B(f),_=z(f,"BUTTON",{class:!0});var b=C(_);he(M.$$.fragment,b),b.forEach(I),f.forEach(I),o.forEach(I),this.h()},h(){s(r,"class","canvas svelte-vhujxn"),s(r,"width","512"),s(r,"height","512"),s(a,"class","brush svelte-vhujxn"),s(a,"width","10"),s(a,"height","10"),s(u,"class","label svelte-vhujxn"),s(_,"class","absolute bottom-0 left-0 p-3"),_.disabled=w=l[3].size<=0,s(t,"class","relative overflow-clip")},m(i,o){Z(i,e,o),c(e,t),c(t,r),l[11](r),c(t,n),c(t,a),l[12](a),c(t,d),c(t,u),c(u,E),c(t,y),c(t,_),fe(M,_,null),g=!0,k||(p=[q(r,"touchmove",Tt),q(r,"pointerenter",zt),q(r,"pointerup",l[4]),q(r,"pointerleave",l[4]),q(r,"pointercancel",l[4]),q(r,"pointerout",l[4]),q(r,"pointermove",l[6]),q(r,"pointerdown",l[5]),q(_,"click",ze(l[13]))],k=!0)},p(i,[o]){var f;(!g||o&1)&&h!==(h=((f=i[0])==null?void 0:f.label)+"")&&Oe(E,h),(!g||o&8&&w!==(w=i[3].size<=0))&&(_.disabled=w)},i(i){g||(ve(M.$$.fragment,i),g=!0)},o(i){me(M.$$.fragment,i),g=!1},d(i){i&&I(e),l[11](null),l[12](null),ge(M),k=!1,Me(p)}}}function zt(){}function tt(l,e){const t=l.getBoundingClientRect();return{x:(e.clientX-t.left)*(l.width/t.width),y:(e.clientY-t.top)*(l.height/t.height)}}function rt(l){l.fillStyle="#46e483",l.fillRect(0,0,l.canvas.width,l.canvas.height)}function Re(l,e){l.drawImage(e,0,0,l.canvas.width,l.canvas.height)}const Tt=l=>l.preventDefault();function Ct(l,e,t){let r,n,a,d;J(l,xe,x=>t(3,r=x)),J(l,Se,x=>t(10,n=x)),J(l,ke,x=>t(0,a=x)),J(l,De,x=>t(18,d=x));let u,h,E,y,_={x:0,y:0},M;ut(()=>{t(9,y=u.getContext("2d")),t(8,E=h.getContext("2d")),window.devicePixelRatio=1,M=new et(u),t(1,u.style.height="unset",u),t(1,u.style.width="unset",u),K(De,d=u,d),rt(y)});let w=!1,g;function k(){t(2,h.style.top=`${10+a.size/2}px`,h),t(2,h.style.left=`${10+a.size/2}px`,h),w=!1}function p(x){w=!0,_=tt(u,x),M.draw({from:_,to:_,size:a.size,color:a.color}),g=_t(),xe.update(S=>(S.set(g,{brush:a,points:[{from:_,to:_}]}),S))}function v(x){const S=tt(u,x);t(2,h.style.top=`${x.offsetY}px`,h),t(2,h.style.left=`${x.offsetX}px`,h),w&&(M.draw({from:_,to:S,size:a.size,color:a.color}),xe.update(O=>{const j=O.get(g);return j==null||j.points.push({from:_,to:S}),O}),_=S)}function i(x){const{size:S,color:O}=x;t(2,h.width=S,h),t(2,h.height=S,h),t(8,E.fillStyle=O,E),E.arc(S/2,S/2,S/2,0,2*Math.PI),E.fill()}function o(){if(r.size<=0)return;const x=Array.from(r.keys());xe.update(S=>(S.delete(x[x.length-1]),S)),f(y)}function f(x){const S=document.createElement("canvas");S.width=512,S.height=512,window.devicePixelRatio=1;const O=new et(S);rt(x),n&&Re(x,n),Array.from(r.values()).forEach(j=>{j.points.forEach((Y,W)=>{O.draw({from:Y.from,to:Y.to,size:j.brush.size,color:j.brush.color})})}),requestAnimationFrame(()=>{Re(x,S)})}function m(x){je[x?"unshift":"push"](()=>{u=x,t(1,u)})}function b(x){je[x?"unshift":"push"](()=>{h=x,t(2,h),t(8,E),t(0,a)})}const T=()=>o();return l.$$.update=()=>{l.$$.dirty&257&&E&&a&&(i(a),t(2,h.style.top=`${10+a.size/2}px`,h),t(2,h.style.left=`${10+a.size/2}px`,h)),l.$$.dirty&1536&&n&&(Re(y,n),K(xe,r=new Map,r))},[a,u,h,r,k,p,v,o,E,y,n,m,b,T]}class Mt extends ne{constructor(e){super(),ie(this,e,Ct,Pt,ce,{})}}function lt(l){let e,t,r;return{c(){e=P("img"),this.h()},l(n){e=z(n,"IMG",{class:!0,alt:!0,src:!0,width:!0,height:!0}),this.h()},h(){s(e,"class",t="image "+(l[1]?"opacity-30":"")+" svelte-1t0h0rs"),s(e,"alt","Endpoint is starting, try again in a few minutes"),Be(e.src,r=l[0])||s(e,"src",r),s(e,"width","512"),s(e,"height","512")},m(n,a){Z(n,e,a)},p(n,a){a&2&&t!==(t="image "+(n[1]?"opacity-30":"")+" svelte-1t0h0rs")&&s(e,"class",t),a&1&&!Be(e.src,r=n[0])&&s(e,"src",r)},d(n){n&&I(e)}}}function at(l){let e,t,r,n,a,d;return{c(){e=P("div"),t=be("svg"),r=be("path"),n=R(),a=P("span"),d=V(l[2]),this.h()},l(u){e=z(u,"DIV",{class:!0});var h=C(e);t=ye(h,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var E=C(t);r=ye(E,"path",{fill:!0,d:!0}),C(r).forEach(I),E.forEach(I),n=B(h),a=z(h,"SPAN",{class:!0});var y=C(a);d=F(y,l[2]),y.forEach(I),h.forEach(I),this.h()},h(){s(r,"fill","currentColor"),s(r,"d","M20 12a8 8 0 0 1-8 8v4a12 12 0 0 0 12-12h-4Zm-2-5.3a8 8 0 0 1 2 5.3h4c0-3-1.1-5.8-3-8l-3 2.7Z"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","none"),s(t,"viewBox","0 0 24 24"),s(t,"class","animate-spin max-w-[3rem]"),s(a,"class","text-xs"),s(e,"class","loading svelte-1t0h0rs")},m(u,h){Z(u,e,h),c(e,t),c(t,r),c(e,n),c(e,a),c(a,d)},p(u,h){h&4&&Oe(d,u[2])},d(u){u&&I(e)}}}function Ot(l){let e,t,r=l[0]&&lt(l),n=l[1]&&at(l);return{c(){e=P("div"),r&&r.c(),t=R(),n&&n.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var d=C(e);r&&r.l(d),t=B(d),n&&n.l(d),d.forEach(I),this.h()},h(){s(e,"class","relative overflow-clip flex flex-col justify-center items-center w-full h-full")},m(a,d){Z(a,e,d),r&&r.m(e,null),c(e,t),n&&n.m(e,null)},p(a,[d]){a[0]?r?r.p(a,d):(r=lt(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),a[1]?n?n.p(a,d):(n=at(a),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:Q,o:Q,d(a){a&&I(e),r&&r.d(),n&&n.d()}}}async function At(l){return new Promise((e,t)=>{try{const r=document.createElement("a");r.download=`sucess-${Date.now()}.png`,r.target="_self",r.onclick=async n=>{r.href&&URL.revokeObjectURL(r.href),r.href=l},requestAnimationFrame(()=>{console.log("Downloading image."),r.click(),e(null)})}catch{t()}})}function Rt(l,e,t){let r,n,a,d,u;J(l,Ce,y=>t(3,r=y)),J(l,Ue,y=>t(0,n=y)),J(l,we,y=>t(1,a=y)),J(l,Pe,y=>t(4,d=y)),J(l,De,y=>t(5,u=y));let h="";async function E(y,{prompt:_,modifier:M,steps:w,seed:g}){const k=dt,p=typeof w=="bigint"?w.toString():w,v=typeof g=="bigint"?g.toString():g,i={inputs:_+". "+M,prompt:_+". "+M,image:y,steps:p,seed:v},o=await fetch(k,{method:"POST",headers:{"Content-Type":"application/json",Accept:"image/png"},body:JSON.stringify(i)});console.log(o);const f=await o.blob();return URL.createObjectURL(f)}return l.$$.update=()=>{l.$$.dirty&50&&(async()=>{if(a){t(2,h="Generating...");const y=await E(u.toDataURL().split(",")[1],d);K(Ue,n=y,n),K(we,a=!1,a)}})(),l.$$.dirty&9&&(async()=>r&&(await At(n),K(Ce,r=!1,r)))()},[n,a,h,r,d,u]}class Bt extends ne{constructor(e){super(),ie(this,e,Rt,Ot,ce,{})}}function jt(l){let e,t,r,n,a,d,u,h,E,y,_,M,w,g,k,p,v,i,o,f,m,b,T,x,S,O,j,Y,W,X,re,$,G,le,ue;return k=new gt({}),i=new Mt({}),f=new Bt({}),X=new ft({}),$=new wt({}),{c(){e=P("div"),t=P("article"),r=P("h1"),n=V("Drawing to Map"),a=R(),d=P("p"),u=V("This space is for the ControlNet model "),h=P("a"),E=P("span"),y=V("Seg2Sat"),_=R(),M=P("p"),w=V("If you don't get your result in a few seconds after query, wait 2minutes and come back. GPU time is expensive and the model is not always running"),g=R(),pe(k.$$.fragment),p=R(),v=P("div"),pe(i.$$.fragment),o=R(),pe(f.$$.fragment),m=R(),b=P("button"),T=V("Generate Map"),S=R(),O=P("button"),j=V("Save Result"),W=R(),pe(X.$$.fragment),re=R(),pe($.$$.fragment),this.h()},l(U){e=z(U,"DIV",{class:!0});var D=C(e);t=z(D,"ARTICLE",{class:!0});var ee=C(t);r=z(ee,"H1",{});var _e=C(r);n=F(_e,"Drawing to Map"),_e.forEach(I),a=B(ee),d=z(ee,"P",{});var te=C(d);u=F(te,"This space is for the ControlNet model "),h=z(te,"A",{href:!0,target:!0});var H=C(h);E=z(H,"SPAN",{});var N=C(E);y=F(N,"Seg2Sat"),N.forEach(I),H.forEach(I),te.forEach(I),_=B(ee),M=z(ee,"P",{});var A=C(M);w=F(A,"If you don't get your result in a few seconds after query, wait 2minutes and come back. GPU time is expensive and the model is not always running"),A.forEach(I),ee.forEach(I),g=B(D),he(k.$$.fragment,D),p=B(D),v=z(D,"DIV",{class:!0});var L=C(v);he(i.$$.fragment,L),o=B(L),he(f.$$.fragment,L),L.forEach(I),m=B(D),b=z(D,"BUTTON",{class:!0});var ae=C(b);T=F(ae,"Generate Map"),ae.forEach(I),S=B(D),O=z(D,"BUTTON",{class:!0});var de=C(O);j=F(de,"Save Result"),de.forEach(I),W=B(D),he(X.$$.fragment,D),re=B(D),he($.$$.fragment,D),D.forEach(I),this.h()},h(){s(h,"href","https://github.com/RubenGres/Seg2Sat"),s(h,"target","_blank"),s(t,"class","prose"),s(v,"class","drawings py-3 -mx-3 svelte-1sy339h"),b.disabled=x=l[0]===!0,s(b,"class","green svelte-1sy339h"),O.disabled=Y=l[1]===!0||!l[2],s(O,"class","svelte-1sy339h"),s(e,"class","max-w-screen-md mx-auto px-3 py-5 relative z-0")},m(U,D){Z(U,e,D),c(e,t),c(t,r),c(r,n),c(t,a),c(t,d),c(d,u),c(d,h),c(h,E),c(E,y),c(t,_),c(t,M),c(M,w),c(e,g),fe(k,e,null),c(e,p),c(e,v),fe(i,v,null),c(v,o),fe(f,v,null),c(e,m),c(e,b),c(b,T),c(e,S),c(e,O),c(O,j),c(e,W),fe(X,e,null),c(e,re),fe($,e,null),G=!0,le||(ue=[q(b,"click",ze(l[3])),q(O,"click",ze(l[4]))],le=!0)},p(U,[D]){(!G||D&1&&x!==(x=U[0]===!0))&&(b.disabled=x),(!G||D&6&&Y!==(Y=U[1]===!0||!U[2]))&&(O.disabled=Y)},i(U){G||(ve(k.$$.fragment,U),ve(i.$$.fragment,U),ve(f.$$.fragment,U),ve(X.$$.fragment,U),ve($.$$.fragment,U),G=!0)},o(U){me(k.$$.fragment,U),me(i.$$.fragment,U),me(f.$$.fragment,U),me(X.$$.fragment,U),me($.$$.fragment,U),G=!1},d(U){U&&I(e),ge(k),ge(i),ge(f),ge(X),ge($),le=!1,Me(ue)}}}function Nt(l,e,t){let r,n,a;return J(l,we,h=>t(0,r=h)),J(l,Ce,h=>t(1,n=h)),J(l,Ue,h=>t(2,a=h)),[r,n,a,()=>K(we,r=!0,r),()=>K(Ce,n=!0,n)]}class Lt extends ne{constructor(e){super(),ie(this,e,Nt,jt,ce,{})}}export{Lt as default};
